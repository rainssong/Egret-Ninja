function construction(e,t){switch(void 0===t&&(t=null),t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);default:return null}}var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var ApplicationManager=function(){function e(){}var t=(__define,e);t.prototype;return e.stageWidth=480,e.stageHeight=800,e}();egret.registerClass(ApplicationManager,"ApplicationManager");var model;!function(e){var t=function(e){function t(t,i,n){void 0===n&&(n=2),e.call(this),this.thickness=1,this.alpha=1,this.color=16777215,this.sp=t,this.ep=i,this.thickness=n}__extends(t,e);var i=(__define,t),n=i.prototype;return n.update=function(){this.thickness--,this.alpha-=.1},t}(egret.HashObject);e.LineModel=t,egret.registerClass(t,"model.LineModel")}(model||(model={}));var view;!function(e){var t=function(e){function t(){e.call(this),this._sp=null,this._cp=null,this._shape=new egret.Shape,this._lines=new Array,this.addChild(this._shape)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.startDraw=function(e){this._sp=e,this._cp=e},s.keepDraw=function(e){this._sp=this._cp,this._cp=e;var t=new model.LineModel(this._sp,this._cp,10);t.alpha=1,this._lines.push(t)},s.update=function(){this._shape.graphics.clear();for(var e=this._lines.length-1;e>=0;e--){var t=this._lines[e];this._shape.graphics.lineStyle(t.thickness+4,.5*t.color,.8*t.alpha),this._shape.graphics.moveTo(t.sp.x,t.sp.y),this._shape.graphics.lineTo(t.ep.x,t.ep.y),t.update(),t.thickness<=0&&this._lines.splice(e,1)}},i(s,"cp",function(){return this._cp}),i(s,"sp",function(){return this._sp}),s.destroy=function(){this._lines.length=0},t}(egret.Sprite);e.LineDrawer=t,egret.registerClass(t,"view.LineDrawer")}(view||(view={}));var Main=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH,ApplicationManager.stageWidth=this.stage.stageWidth,ApplicationManager.stageHeight=this.stage.stageHeight,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("game")},n.onResourceLoadComplete=function(e){"game"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"game"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){var e=new view.GameScene;this.stage.addChild(e),e.start()},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Singletons=function(){function e(){}var t=(__define,e);t.prototype;return e.eventBus=new egret.EventDispatcher,e}();egret.registerClass(Singletons,"Singletons");var SoundManager=function(){function e(){}var t=(__define,e);t.prototype;return e.playCutSound=function(){RES.getRes("cut_mp3").play(0,1)},e.playDropSound=function(){RES.getRes("drop_mp3").play(0,1)},e.playSplatterSound=function(){RES.getRes("splatter_mp3").play(0,1)},e.playSwipSound=function(){RES.getRes("swip_mp3").play(0,1)},e.playThrowSound=function(){RES.getRes("throw_mp3").play(0,1)},e}();egret.registerClass(SoundManager,"SoundManager");var Test=function(e){function t(){e.call(this),this.ld=new view.LineDrawer,this.ld.startDraw(new egret.Point(0,0)),this.addChild(this.ld),this.addEventListener(egret.Event.ENTER_FRAME,this.oef,this),this.ld.startDraw(new egret.Point(100,100)),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdd,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAdd=function(e){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMouse,this)},n.onMouse=function(e){this.ld.keepDraw(new egret.Point(e.stageX,e.stageY))},n.oef=function(){this.ld.update()},t}(egret.Sprite);egret.registerClass(Test,"Test");var view;!function(e){var t=function(e){function t(){e.call(this),this._type="entity",this.speed=new egret.Point,this.velocity=new egret.Point,this.angSpeed=0,this.z=10,this.init()}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){this.reset()},s.reset=function(){},s.update=function(e){void 0===e&&(e=1/60),null!=this._environment&&(this.speed.y+=this._environment.gravity*e,this.x+=this.speed.x*e,this.y+=this.speed.y*e,this.rotation+=this.angSpeed*e)},s.remove=function(){this._environment&&this._environment.removeEntity(this),ObjectPool.returnObject(this)},i(s,"environment",function(){return this._environment},function(e){this._environment=e}),t}(egret.Sprite);e.EntityView=t,egret.registerClass(t,"view.EntityView")}(view||(view={}));var view;!function(e){var t=function(e){function t(){e.call(this),this._skin=new egret.Bitmap,this.addChild(this._skin)}__extends(t,e);var i=__define,n=t,s=n.prototype;return i(s,"skin",function(){return this._skin}),i(s,"texture",function(){return this._skin.texture},function(e){this._skin.texture=e,this._skin.x=.5*-this._skin.width,this._skin.y=.5*-this._skin.height}),t}(e.EntityView);e.BreakFruitView=t,egret.registerClass(t,"view.BreakFruitView")}(view||(view={}));var view;!function(e){var t=function(e){function t(){e.call(this),this._lifeTime=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.update=function(e){void 0===e&&(e=1/60),this._lifeTime-=e,this._lifeTime<=0&&this.remove()},t}(e.EntityView);e.LifeEntityView=t,egret.registerClass(t,"view.LifeEntityView")}(view||(view={}));var view;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.init=function(){this._skin=new egret.Bitmap,this._skin.fillMode=egret.BitmapFillMode.SCALE,this.addChild(this._skin),e.prototype.init.call(this)},s.reset=function(){this._lifeTime=6,this._skin.alpha=.7},s.update=function(t){void 0===t&&(t=1/60),e.prototype.update.call(this,t),this._lifeTime<=2.8&&(this._skin.alpha=.25*this._lifeTime,this.y+=5*t)},i(s,"texture",function(){return this._skin.texture},function(e){this._skin.texture=e,this._skin.x=.5*-this._skin.width,this._skin.y=.5*-this._skin.height,this.reset()}),t}(e.LifeEntityView);e.JuiceView=t,egret.registerClass(t,"view.JuiceView")}(view||(view={}));var ObjectPool=function(){function e(e){this._template=e,this._list=new Array}var t=(__define,e),i=t.prototype;return i.getObject=function(e){return void 0===e&&(e=null),this._list.length>0?this._list.shift():construction(this._template,e)},i.returnObject=function(e){this._list.push(e)},i.dispose=function(){this._list=null,this._template=null},e.getPool=function(t){return e._pool[t]||(e._pool[t]=new e(t)),e._pool[t]},e.getObject=function(t,i){return void 0===i&&(i=[]),e.getPool(t).getObject(i)},e.returnObject=function(t){return e.getPool(t.constructor).returnObject(t)},e.dispose=function(t){void 0===t&&(t=null),t?e.getPool(t).dispose():e._pool=[]},e._pool=new Array,e}();egret.registerClass(ObjectPool,"ObjectPool");var view;!function(e){var t=function(t){function i(){t.call(this),this._color=0,this._health=1,this._score=10,this._skin=new egret.Bitmap,this.addChild(this._skin)}__extends(i,t);var n=__define,s=i,r=s.prototype;return r.reset=function(){t.prototype.reset.call(this),this._health=1},r.update=function(e){void 0===e&&(e=1/60),this.y>ApplicationManager.stageHeight+100&&(Singletons.eventBus.dispatchEvent(new egret.Event("miss")),this.remove()),this.x<-0&&this.speed.x<0&&(this.speed.x*=-1),this.x>ApplicationManager.stageWidth&&this.speed.x>0&&(this.speed.x*=-1),t.prototype.update.call(this,e)},r.cut=function(e){return void 0===e&&(e=0),this._health--,Singletons.eventBus.dispatchEvent(new egret.Event("cut",!1,!1,this._score)),0==this._health&&this.break2(e),!0},r.getScore=function(){return this._score},r.break2=function(t){if(void 0===t&&(t=0/0),null!=this._environment){this.rotation=t+90,this.speed.y<0&&(this.speed.y=5);var i,n;if(this.backTex&&(i=ObjectPool.getObject(e.BreakFruitView),i.texture=this.backTex,i.rotation=this.rotation,n=this.localToGlobal(this.backOffset.x,this.backOffset.y),i.reset(),i.x=n.x,i.y=n.y,i.z=1,console.log(this.x,i.x),i.angSpeed=this.angSpeed-70,i.speed.copyFrom(this.speed),i.speed.x+=4*(i.x-this.x),i.speed.y+=4*(i.y-this.y),this._environment.addEntity(i)),this.frontTex){i=ObjectPool.getObject(e.BreakFruitView),i.reset(),i.texture=this.frontTex,i.rotation=this.rotation;var n=this.localToGlobal(this.frontOffset.x,this.frontOffset.y);i.x=n.x,i.y=n.y,i.angSpeed=this.angSpeed+70,i.speed.copyFrom(this.speed),i.speed.x+=4*(i.x-this.x),i.speed.y+=4*(i.y-this.y),this._environment.addEntity(i)}if(this.juiceTex){var s=ObjectPool.getObject(e.JuiceView);s.texture=this.juiceTex,n=this.localToGlobal(this.juiceOffset.x,this.juiceOffset.y),s.x=n.x,s.y=n.y,s.z=0,s.rotation=this.rotation,this._environment.addEntity(s)}if(this.particleTex){var r=ObjectPool.getObject(particle.GravityParticleSystem,[RES.getRes("particle_png"),RES.getRes("particle_json")]);r.changeTexture(this.particleTex),r.x=this.x,r.y=this.y,this._environment.addChildAt(r,10),r.start(10),r.addEventListener(egret.Event.COMPLETE,this.onParticleComplete,this)}Singletons.eventBus.dispatchEvent(new egret.Event("break2")),this.remove()}},r.onParticleComplete=function(e){var t=e.currentTarget;t.parent&&t.parent.removeChild(t),ObjectPool.returnObject(t)},n(r,"color",function(){return this._color}),i}(e.EntityView);e.FruitView=t,egret.registerClass(t,"view.FruitView")}(view||(view={}));var view;!function(e){var t=function(e){function t(){e.call(this),this._skin.texture=RES.getRes("orange_png"),this._type="orange",this._color=16768136,this._skin.x=-40,this._skin.y=-40,this.frontTex=RES.getRes("orangef_png"),this.backTex=RES.getRes("orangeb_png"),this.juiceTex=RES.getRes("orangej_png"),this.particleTex=RES.getRes("orangep_png"),this.backOffset=new egret.Point(-15,0),this.frontOffset=new egret.Point(15,0),this.juiceOffset=new egret.Point(15,0)}__extends(t,e);var i=(__define,t);i.prototype;return t}(e.FruitView);e.OrangeView=t,egret.registerClass(t,"view.OrangeView")}(view||(view={}));var view;!function(e){var t=function(e){function t(){e.call(this),this.gravity=9.8,this._entitys=new Array}__extends(t,e);var i=__define,n=t,s=n.prototype;return s.update=function(e){void 0===e&&(e=1/60);for(var t in this._entitys){var i=this._entitys[t];i.update(e)}},s.addEntity=function(e){this.addChildAt(e,Math.max(e.z,0)),e.environment=this,-1==this._entitys.indexOf(e)&&this._entitys.push(e)},s.removeEntity=function(e){this.removeChild(e),e.environment=null;var t=this._entitys.indexOf(e);t>=0&&this._entitys.splice(t,1)},s.removeAllEntity=function(){for(;this._entitys.length;)this.removeEntity(this._entitys[0])},i(s,"entitys",function(){return this._entitys}),s.destroy=function(){this.removeAllEntity()},t}(egret.Sprite);e.SpaceView=t,egret.registerClass(t,"view.SpaceView")}(view||(view={}));var TestBase=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ENTER_FRAME,this.oef,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdd,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAdd=function(e){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},n.onTouch=function(e){},n.oef=function(){},t}(egret.Sprite);egret.registerClass(TestBase,"TestBase");var FruitTest=function(e){function t(){e.call(this),this.f=new view.OrangeView,this.f.x=100,this.f.y=100,this.addChild(this.sv=new view.SpaceView),this.sv.addEntity(this.f),this.f2=new view.OrangeView,this.f2.x=200,this.f2.y=100,this.sv.addEntity(this.f2),this.f3=new view.OrangeView,this.f3.x=300,this.f3.y=100,this.sv.addEntity(this.f3)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onTouch=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this.f.cut(0),this.f2.cut(45),this.f3.cut(90);break;case egret.TouchEvent.TOUCH_MOVE:break;case egret.TouchEvent.ENDED:}},n.oef=function(){this.sv.update(.01)},t}(TestBase);egret.registerClass(FruitTest,"FruitTest");var LineDrawerTest=function(e){function t(){e.call(this),this.ld=new view.LineDrawer,this.ld.startDraw(new egret.Point(0,0)),this.addChild(this.ld),this.ld.startDraw(new egret.Point(100,100))}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onTouch=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this.ld.startDraw(new egret.Point(e.stageX,e.stageY));break;case egret.TouchEvent.TOUCH_MOVE:this.ld.keepDraw(new egret.Point(e.stageX,e.stageY));break;case egret.TouchEvent.ENDED:}},n.oef=function(){this.ld.update()},t}(TestBase);egret.registerClass(LineDrawerTest,"LineDrawerTest");var MathTest=function(e){function t(){e.call(this),console.log(Math.cos(0*MathCore.RADIAN_DEGREE_RATIO)),console.log(Math.cos(30*MathCore.RADIAN_DEGREE_RATIO)),console.log(Math.cos(45*MathCore.RADIAN_DEGREE_RATIO)),console.log(Math.cos(60*MathCore.RADIAN_DEGREE_RATIO))}__extends(t,e);var i=(__define,t);i.prototype;return t}(TestBase);egret.registerClass(MathTest,"MathTest");var ArrayCore=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);i.prototype;return t.concat=function(e,t){var i=e.slice();return i.push.apply(null,t),i},t.getIntArray=function(e,t){void 0===e&&(e=0),void 0===t&&(t=100);for(var i=[],n=e;t>e?t>=n:n>=t;t>e?n++:n--)i.push(n);return i},t.getContentArray=function(e,t){void 0===t&&(t=0);var i=[];if(0==t)return i;for(var n=0;t>n;n++)i.push(e);return i},t.forEach=function(e,t){for(var i in e){var n=e[i];n[t]()}},t.getRandomizedArray=function(e){for(var t,i=e.slice(),n=i.length,s=0,r=0;n;)s=n-1,r=Math.floor(Math.random()*n),n--,s!=r&&(t=i[s],i[s]=i[r],i[r]=t);return i},t.getLightRandomizedArray=function(e,t){void 0===t&&(t=1);for(var i=e.slice(),n=i.length,s=0;n-1>s;s++)if(Math.random()>.5){var r=i[s];i[s]=i[s+1],i[s+1]=r}return i},t.switchElements=function(e,t,i){var n=e[t];e[t]=e[i],e[i]=n},t.sum=function(e){for(var t=0,i=0;i<e.length;i++)"number"==typeof e[i]&&(t+=e[i]);return t},t.vectorToArray=function(e){var t=new Array,i=function(e,i,n){return t.push(e),!0};return e.every(i),t},t.arrayToVector=function(e){return Array(e)},t.merge=function(e,t){for(var i=e.slice(),n=0;n<t.length;n++)i.indexOf(t[n])>=0||i.push(t[n]);return i},t.removeByElement=function(e,t){e.indexOf(t)>-1&&e.splice(e.indexOf(t),1)},t}(egret.HashObject);egret.registerClass(ArrayCore,"ArrayCore");var MathCore=function(){function e(){}var t=(__define,e);t.prototype;return e.randomSelect=function(e){return e[Math.floor(e.length*Math.random())]},e.getRandomNumber=function(e,t){return Math.random()*(t-e)+e},e.getRandomInt=function(e,t){return void 0===e&&(e=-(1/0)),void 0===t&&(t=1/0),Math.floor(Math.random()*(t-e+1)+e)},e.getRangedNumber=function(e,t,i){if(void 0===t&&(t=-(1/0)),void 0===i&&(i=1/0),t>i){var n=t;t=i,i=n}return isNaN(t)&&(t=-(1/0)),isNaN(i)&&(i=1/0),Math.max(t,Math.min(e,i))},e.DEGREE_RADIAN_RATIO=180/Math.PI,e.RADIAN_DEGREE_RATIO=Math.PI/180,e}();egret.registerClass(MathCore,"MathCore");var view;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this._skin=new egret.Bitmap(RES.getRes("flash_png")),this._skin.fillMode=egret.BitmapFillMode.SCALE,this._skin.x=.5*-this._skin.width,this._skin.y=.5*-this._skin.height,this.addChild(this._skin),e.prototype.init.call(this)},n.reset=function(){this._lifeTime=.3,this._skin.alpha=1},n.update=function(t){void 0===t&&(t=1/60),e.prototype.update.call(this,t),this._lifeTime<=.3&&(this._skin.alpha=3.3*this._lifeTime)},t}(e.LifeEntityView);e.FlashView=t,egret.registerClass(t,"view.FlashView")}(view||(view={}));var view;!function(e){var t=function(t){function i(){t.call(this),this._isDown=!1,this._freezeTime=0,this._life=3,this._score=0,this._gameTime=0,this._isPaused=!0,this._isOver=!1,this.fruitClasses=[e.OrangeView],this._touchX=0,this._touchY=0,this.lastTime=0,this.newTime=0,this.createChildren()}__extends(i,t);var n=(__define,i),s=n.prototype;return s.createChildren=function(){this._bg=new egret.Bitmap(RES.getRes("bg_png")),this.addChild(this._bg),this._fruitSpace=new e.SpaceView,this.addChild(this._fruitSpace),this._fruitSpace.gravity=1600,this._effectSpace=new e.SpaceView,this.addChild(this._effectSpace),this._effectSpace.touchChildren=this._effectSpace.touchChildren=!1,this._lineDrawer=new e.LineDrawer,this.addChild(this._lineDrawer),this._lifeLabel=new egret.TextField,this._lifeLabel.text="",this._lifeLabel.textAlign=egret.HorizontalAlign.RIGHT,this._lifeLabel.textColor=16711680,this._lifeLabel.width=120,this._lifeLabel.x=ApplicationManager.stageWidth-this._lifeLabel.width-20,this._lifeLabel.y=20,this.addChild(this._lifeLabel),this._scoreLabel=new egret.TextField,this._scoreLabel.text="0",this._scoreLabel.textAlign=egret.HorizontalAlign.LEFT,this._scoreLabel.textColor=16777215,this._scoreLabel.x=20,this._scoreLabel.y=20,this.addChild(this._scoreLabel),this._fruits=new Array,this.touchEnabled=!0,this.updateUI(),this.initialize()},s.restart=function(){this.reset(),this.start()},s.initialize=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),Singletons.eventBus.addEventListener("miss",this.onMiss,this),Singletons.eventBus.addEventListener("break2",this.onBreak2,this),Singletons.eventBus.addEventListener("cut",this.onCut,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchDown,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchUp,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchUp,this),this.reset()},s.onCut=function(e){this._score+=e.data,this._scoreLabel.text=this._score.toFixed(0)},s.onBreak2=function(e){SoundManager.playSplatterSound()},s.onMiss=function(e){this._life--,SoundManager.playDropSound()},s.onTouchUp=function(e){this._isDown=!1,this._touchX=null,this._touchY=null},s.onTouchDown=function(e){this._isDown=!0,this._touchX=e.stageX,this._touchY=e.stageY,this._lineDrawer.startDraw(new egret.Point(e.stageX,e.stageY))},s.onTouchMove=function(e){this._touchX=e.stageX,this._touchY=e.stageY},s.updateUI=function(){this._lifeLabel.text=3==this._life?"":2==this._life?"X":1==this._life?"XX":"XXX",this._gameTime.toFixed(1)+"s"},s.onEnterFrame=function(e){this.newTime=egret.getTimer(),this.update(.001*(this.newTime-this.lastTime)),this.lastTime=this.newTime},s.update=function(t){void 0===t&&(t=1/60);var i=new egret.Point(this._touchX,this._touchY);if(this.updateUI(),!this._isPaused&&(this._fruitSpace.update(t),this._effectSpace.update(t),this._lineDrawer.update(),!this._isOver)){if(this._gameTime+=t,0==this._life&&this.gameOver(),this._isDown){this._lineDrawer.keepDraw(i);var n=Math.atan2(this._lineDrawer.cp.y-this._lineDrawer.sp.y,this._lineDrawer.cp.x-this._lineDrawer.sp.x),s=egret.Point.distance(this._lineDrawer.cp,this._lineDrawer.sp)/t;if(s>1e3)for(var r=0;r<this._fruitSpace.entitys.length;r++){var o=this._fruitSpace.entitys[r];if(o instanceof e.FruitView){var a=o;if(a.hitTestPoint(i.x,i.y)){a.cut(MathCore.DEGREE_RADIAN_RATIO*n),SoundManager.playCutSound();var h=ObjectPool.getObject(e.FlashView);h.reset(),h.rotation=MathCore.DEGREE_RADIAN_RATIO*n,this._fruitSpace.addEntity(h),h.x=i.x,h.y=i.y}}}}var c=Math.random();if(.023>c){var u=MathCore.randomSelect(this.fruitClasses),l=new u;l.reset(),this._fruitSpace.addEntity(l),l.x=MathCore.getRandomInt(20,ApplicationManager.stageWidth-120),l.y=ApplicationManager.stageHeight,l.rotation=MathCore.getRandomNumber(-360,360),l.speed.x=MathCore.getRandomInt(-300,300),l.speed.y=MathCore.getRandomInt(-1600,-1100),l.angSpeed=MathCore.getRandomNumber(-180,180),SoundManager.playThrowSound()}}},s.reset=function(){this._life=3,this._score=0,this._scoreLabel.text=this._score.toFixed(0),this._gameTime=0,this._isOver=!1;this._fruits.length=0,this._fruitSpace.removeAllEntity(),this._effectSpace.removeAllEntity()},s.pause=function(){this._isPaused=!0},s.resume=function(){this._isPaused=!1},s.gameOver=function(){alert("Game Over, Your Score:"+this._score),this._isOver=!0,this._isPaused=!0,this.restart()},s.start=function(){this.lastTime=egret.getTimer(),this.resume(),this._isOver=!1},s.destroy=function(){this._fruitSpace.destroy(),this._effectSpace.destroy(),Singletons.eventBus.removeEventListener("miss",this.onMiss,this),Singletons.eventBus.removeEventListener("break2",this.onBreak2,this),Singletons.eventBus.removeEventListener("cut",this.onCut,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchDown,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchUp,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchUp,this)},i}(egret.Sprite);e.GameScene=t,egret.registerClass(t,"view.GameScene")}(view||(view={}));